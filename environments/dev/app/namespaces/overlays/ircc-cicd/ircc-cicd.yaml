kind: Namespace
apiVersion: v1
metadata:
  name: ircc-cicd
  labels:
    ircc.gc.ca/environment: dev
    ircc.gc.ca/team: ircc-integration
spec: {}
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-from-same-namespace
  namespace: ircc-cicd
spec:
  ingress:
  - from:
    - podSelector: {}
  podSelector: {}
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-from-openshift-ingress
  namespace: ircc-cicd
spec:
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          network.openshift.io/policy-group: ingress
  podSelector: {}
  policyTypes:
  - Ingress
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: deny-by-default
  namespace: ircc-cicd
spec:
  ingress: []
  podSelector: {}
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-from-openshift-monitoring
  namespace: ircc-cicd
spec:
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          network.openshift.io/policy-group: monitoring
  podSelector: {}
  policyTypes:
  - Ingress
---
apiVersion: v1
kind: "LimitRange"
metadata:
  name: project-limits
  namespace: ircc-cicd
spec:
  limits:
    - type: "Container"
      default:
        cpu: "1" 
        memory: "1Gi" 
      defaultRequest:
        cpu: "500m" 
        memory: "500Mi"
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: project-quota
  namespace: ircc-cicd
spec:
  hard:
    pods: "30" 
    requests.cpu: "8" 
    requests.memory: 24Gi 
    limits.cpu: "12" 
    limits.memory: 32Gi
    requests.storage: "200G"
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: admin
  namespace: ircc-cicd
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: admin
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: Group
  name: Developers